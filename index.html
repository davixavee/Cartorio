<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Cartório digital de Ibiam</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image" href="favicon.ico">

</head>

<body>

    <!-- o tal do cabeçalho kkkk -->
    <header class="site-header card" role="banner">
        <div class="header-inner">
            <h1>Cartório Digital de Ibiam</h1>
            <p class="subtitle">Gerencie registros de nascimento, casamento e óbito!</p>
        </div>
    </header>

    <!--aqui é o Registro -->
    <div class="app">
        <div class="conteudo">
            <main class="registro card">
                <form id="form">
                    <div class="tabs" role="tablist" aria-label="Tipos de registro">
                        <button type="button" class="tab active" data-tipo="nascimento">Nascimento</button>
                        <button type="button" class="tab" data-tipo="casamento">Casamento</button>
                        <button type="button" class="tab" data-tipo="obito">Óbito</button>
                    </div>

                    <div id="nascimento" class="campos" aria-hidden="false">
                        <input name="nome" type="text" placeholder="Nome completo (ex: João da Silva)" required>
                        <input name="mae" type="text" placeholder="Mãe (ex: Maria dos Santos)" required>
                        <input name="pai" type="text" placeholder="Pai (ex: Antônio da Silva)" required>
                        <input name="data" type="date" required>
                        <div class="grupo_estado_cidade">
                            <select name="frm_estado[]" data-estado="" data-grupo-id="1"></select>
                            <select name="frm_cidade[]" data-cidade="" data-grupo-id="1"></select>
                        </div>


                        <input name="hospital" type="text" placeholder="Hospital" required>
                        <input name="registro" type="text" placeholder="Nº registro" required>
                    </div>

                    <div id="casamento" class="campos" style="display:none" aria-hidden="true">
                        <input name="conjuge1" type="text" placeholder="Cônjuge 1" required>
                        <input name="conjuge2" type="text" placeholder="Cônjuge 2" required>
                        <input name="data" type="date" required>
                        <input name="regime" type="text" placeholder="Regime de bens" required>
                        <div class="grupo_estado_cidade">
                            <select name="frm_estado[]" data-estado="" data-grupo-id="2"></select>
                            <select name="frm_cidade[]" data-cidade="" data-grupo-id="2"></select>
                        </div>
                        <input name="celebrante" type="text" placeholder="Celebrante" required>
                        <input name="registro" type="text" placeholder="Nº registro" required>
                    </div>

                    <div id="obito" class="campos" style="display:none" aria-hidden="true">
                        <input name="nome" type="text" placeholder="Nome do falecido" required>
                        <input name="data" type="date" required>
                        <div class="grupo_estado_cidade">
                            <select name="frm_estado[]" data-estado="" data-grupo-id="3"></select>
                            <select name="frm_cidade[]" data-cidade="" data-grupo-id="3"></select>
                        </div>
                        <input name="causa" type="text" placeholder="Causa" required>
                        <input name="declarante" type="text" placeholder="Declarante" required>
                        <input name="parentesco" type="text" placeholder="Parentesco" required>
                        <input name="registro" type="text" placeholder="Nº registro" required>
                    </div>

                    <div class="botoes">
                        <button type="submit" class="salvar">Salvar</button>
                        <button type="button" class="limpar">Limpar</button>
                    </div>
                </form>
            </main>

            <!-- Tabela :) -->
            <section class="lista-registros card" aria-live="polite">
                <table>
                    <caption class="sr-only">Registros salvos</caption>
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Resumo</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="lista"></tbody>
                </table>
                <div class="nota">Clique em editar na linha ou no botão "Editar" para carregar o registro.</div>
            </section>
        </div>
    </div>

    <!-- Roda os pé -->
    <footer class="site-footer card" role="contentinfo">
        <div class="footer-inner">
            <small>© Cartório digital de Ibiam — Eu que fiz, XD</small>
        </div>
    </footer>
    <script src="CidadesEstados.min.js"></script>
    <script src="script.js"></script>
    <!-- aqui é o js integrado pra os estados e cidades -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ce = new CidadesEstados();
            ce.init();
        });
        (function() {
            const addBtn = document.getElementById("add");
            if (!addBtn) return;
            addBtn.addEventListener("click", (event) => {
                let grupo = document.querySelector(".grupo_estado_cidade");
                if (!grupo) return;
                let gruposTotal = document.querySelectorAll(".grupo_estado_cidade").length + 1;
                let grupoNovo = grupo.cloneNode(true);
                let estadoObj = grupoNovo.querySelector("[data-estado]");
                let cidadeObj = grupoNovo.querySelector("[data-cidade]");

                estadoObj.setAttribute("data-estado", "");
                estadoObj.setAttribute("data-grupo-id", gruposTotal);

                cidadeObj.setAttribute("data-cidade", "");
                cidadeObj.setAttribute("data-grupo-id", gruposTotal);

                while (cidadeObj.firstChild) {
                    cidadeObj.removeChild(cidadeObj.firstChild);
                }
                cidadeObj.options[cidadeObj.options.length] = new Option('Selecione uma cidade', '');

                event.target.parentNode.insertBefore(grupoNovo, event.target);
            });
        })();
    </script>

</body>

</html>